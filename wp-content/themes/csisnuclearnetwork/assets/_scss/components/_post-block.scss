@use 'abstracts' as *;
/* stylelint-disable max-nesting-depth,
  selector-max-compound-selectors
*/

.post-block {
  position: relative;
  // display: grid;
  // grid-template-areas:
  //   'img'
  //   'types'
  //   'title'
  //   'authors'
  //   'date'
  //   'excerpt'
  //   'series';
  // grid-template-columns: 1fr;
  margin-right: auto;
  margin-bottom: rem(24);
  margin-left: auto;
  padding: rem(24) rem(24) rem(32);
  color: var(--post-meta);
  background: $color-white-100;

  &::after {
    content: '';
    display: table;
    clear: both;
  }

  @include breakpoint('small') {
    padding: rem(32);
  }

  @include breakpoint('large') {
    padding-right: rem(48);
    padding-left: rem(48);
  }

  &:hover {
    @include shadow('lg');
  }

  &.has-post-thumbnail {
    @include breakpoint('medium') {
      // grid-template-areas:
      //   'types img'
      //   'title img'
      //   'authors img'
      //   'date img'
      //   'excerpt img'
      //   'series series';
      // grid-template-columns: 2fr 1fr;
      // grid-template-rows: max-content max-content max-content max-content auto;
      // column-gap: rem(32);
    }
  }

  &__img {
    float: right;
    width: 100%;
    margin-bottom: rem(24);
    transition: all 0.3s ease-in-out;

    @include breakpoint('medium') {
      max-width: rem(175);
      margin-left: rem(24);
    }

    &:hover ~ .post-block__title {
      // color: $color-link-primary-200;

      .archive__featured & {
        // color: $color-accent-dark-primary-400;
      }
    }

    .post-block.programs &,
    .archive__featured & {
      @include breakpoint('medium') {
        max-width: rem(280);
      }
    }

    .post-block.programs & {
      @include breakpoint('large') {
        max-width: rem(350);
      }
    }
  }

  &__title {
    @extend %text-style-heading-medium;
    grid-area: title;
    margin-bottom: rem(12);
    color: $color-black-100;

    a {
      &:hover {
        color: $color-accent-primary-blue-200;
      }

      &:focus {
        background: $color-bg-light-300;
        outline: 0;
      }
    }

    /* stylelint-disable */
    a[href*="//"]:not([class]):not([href*="nuclearnetwork.local"]):not([href*="localhost"]):not([href*="nuclearnetwork"])
    {
      /* stylelint-enable */
      &::after {
        content: '';
        display: inline-block;
        width: 0.7em;
        height: 0.7em;
        margin-left: rem(8);
        background-image: url('/wp-content/themes/csisnuclearnetwork/assets/static/icons/arrow-external.svg');
        background-size: 100% 100%;
        opacity: 0.9;
        transition: all 0.3s ease-in-out;
      }

      &:hover::after {
        opacity: 1;
        filter: invert(26%) sepia(69%) saturate(1514%) hue-rotate(187deg) brightness(85%) contrast(80%);
      }

      &:focus::after {
        // filter: invert(12%) sepia(88%) saturate(853%) hue-rotate(180deg) brightness(102%) contrast(89%);
      }
    }

    .archive__featured & {
      color: $color-white-190;

      a {
        &:hover {
          // color: $color-accent-dark-primary-400;
        }

        &:focus {
          color: $color-white-100;
          background: $color-border-light-130;
        }
      }
    }

    .post-block.projects &,
    .post-block.programs &,
    .post-block.news & {
      @extend %text-style-heading-large-strong;
      color: $color-accent-primary-blue-200;

      a {
        &:hover {
          color: $color-accent-primary-blue-100;
        }

        &:focus {
          color: $color-accent-primary-blue-100;
        }
      }

      /* stylelint-disable */
      a[href*="//"]:not([class]):not([href*="nuclearnetwork.local"]):not([href*="localhost"]):not([href*="nuclearnetwork"])
      {
        /* stylelint-enable */
        &::after {
          opacity: 1;
          filter: invert(26%) sepia(69%) saturate(1514%) hue-rotate(187deg) brightness(85%) contrast(80%);
        }

        &:hover::after {
          filter: invert(12%) sepia(88%) saturate(853%) hue-rotate(180deg) brightness(102%) contrast(89%);
        }

        &:focus::after {
          filter: invert(12%) sepia(88%) saturate(853%) hue-rotate(180deg) brightness(102%) contrast(89%);
        }
      }
    }

    .post-block.projects &,
    .post-block.programs & {
      &::after {
        content: '';
        display: block;
        width: rem(56);
        height: rem(4);
        margin-top: rem(4);
        background-color: $color-accent-secondary-yellow-100;
      }
    }
  }

  &__excerpt {
    @extend %text-style-paragraph-medium-short;
    grid-area: excerpt;
    color: $color-black-190;
    overflow-wrap: break-word;

    .archive__featured & {
      color: $color-white-190;
    }
  }

  .post-meta__authors {
    grid-area: authors;

    .archive__featured & {
      --post-meta: #{$color-white-190};

      a {
        color: $color-white-190;

        &:hover {
          // color: $color-accent-dark-primary-400;
        }

        &:focus {
          color: $color-white-100;
          background: $color-bg-dark-400;
        }
      }
    }

    a {
      &:hover {
        // color: $color-link-primary-200;
      }

      /* stylelint-disable-next-line */
      &:focus {
        // color: $color-link-primary-200;
        background: $color-bg-light-400;
      }
    }
  }

  .post-meta__date {
    grid-area: date;
    margin-bottom: rem(12);

    @include breakpoint('small') {
      margin-bottom: rem(16);
    }

    .archive__featured & {
      --post-meta: #{$color-white-165};
    }
  }

  .post-meta__terms {
    grid-area: types;

    .archive__featured & {
      // --post-meta: #{$color-accent-dark-primary-400};

      li:not(:last-of-type)::after {
        border-right: 1px solid $color-border-light-130;
      }

      a {
        &:hover {
          color: $color-white-100;
        }

        &:focus {
          color: $color-white-100;
          background: $color-bg-dark-400;
        }
      }
    }
  }

  .post-meta__series {
    margin-top: rem(24);
    padding-top: rem(16);
    border-top: 1px solid $color-border-dark-130;

    @include breakpoint('small') {
      padding-top: rem(24);
    }
  }

  .featured-media a {
    display: block;
  }

  &.post-block__monthly-newsletter {
    .post-meta__date {
      margin-bottom: 0;
      padding-top: rem(24);
      border-top: 1px solid $color-border-dark-130;

      .post-meta__label {
        display: none;
      }
    }
  }
}
