@use '../abstracts' as *;

/* stylelint-disable */
.blog,
.tax-series,
.tax-analysis_subtype {
  /* stylelint-enable */
  --page-header-bg: var(--page-header-analysis);
  --page-header-padding-bottom: #{rem(40)};

  @include breakpoint('large') {
    --page-header-padding-bottom: #{rem(64)};
  }
}

/* stylelint-disable */
.post-type-archive-events,
.tax-event_types {
  /* stylelint-enable */
  --page-header-bg: var(--page-header-events);
  --page-header-padding-bottom: #{rem(48)};

  @include breakpoint('large') {
    --page-header-padding-bottom: #{rem(80)};
  }
}

.post-type-archive-programs {
  --page-header-bg: var(--page-header-programs);
  --page-header-padding-bottom: #{rem(48)};

  @include breakpoint('large') {
    --page-header-padding-bottom: #{rem(136)};
  }
}

.post-type-archive-projects {
  --page-header-bg: var(--page-header-projects);
  --page-header-padding-bottom: #{rem(48)};

  @include breakpoint('large') {
    --page-header-padding-bottom: #{rem(136)};
  }
}

.post-type-archive-news {
  --page-header-bg: var(--page-header-npn);
  --page-header-padding-bottom: #{rem(48)};

  @include breakpoint('large') {
    --page-header-padding-bottom: #{rem(80)};
  }
}

.post-type-archive-updates {
  --page-header-bg: var(--page-header-updates);
  --page-header-padding-bottom: #{rem(40)};

  @include breakpoint('large') {
    --page-header-padding-bottom: #{rem(64)};
  }
}

.single-programs {
  --page-header-bg: var(--page-header-programs);
  --page-header-padding-bottom: #{rem(48)};

  @include breakpoint('large') {
    --page-header-padding-bottom: #{rem(136)};
  }
}

.search,
.category,
.tag {
  --page-header-bg: var(--page-header-general);
  --page-header-padding-bottom: #{rem(48)};

  @include breakpoint('large') {
    --page-header-padding-bottom: #{rem(80)};
  }
}

.entry-header {
  position: relative;
  display: flex;
  flex-direction: column;
  margin: 0 auto rem(24);

  @include breakpoint('small') {
    margin-bottom: rem(40);
  }

  @include breakpoint('large') {
    margin-bottom: rem(64);
    padding-top: calc(#{rem(56)} + var(--site-header-height));
  }

  @include breakpoint('xlarge') {
    margin-bottom: rem(80);
  }

  &::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    @include z-index(postBG);
    display: block;
    background-repeat: no-repeat;
    background-size: cover;
  }

  &--blue {
    --page-header-title-color: #{$color-white-190};
    --page-header-title-margin-bottom: #{rem(12)};

    padding: calc(#{rem(24)} + var(--site-header-height)) 0 var(--page-header-padding-bottom); // Top padding includes 56px for the site header

    &::before {
      @include csis-block-full-width-wrapper();
      background: var(--page-header-bg);
      background-color: $color-blue-000;
      background-repeat: no-repeat;
      background-position: center;
      background-size: cover;
    }
  }

  &--light {
    --page-header-title-color: #{$color-accent-primary-blue-100};
    --page-header-title-margin-bottom: #{rem(16)};
    --page-header-padding-top: #{rem(32)};
    /* stylelint-disable-next-line */
    $headerCircles: '/wp-content/themes/csisnuclearnetwork/assets/static/page-header-circles.svg';
    /* stylelint-disable-next-line */
    $gradient: url($headerCircles), linear-gradient(180deg, rgba(16, 48, 79, 0.68) 0%, rgba(53, 110, 163, 0.0966914) 30.95%, rgba(56, 115, 171, 0) 100%), linear-gradient(90.1deg, #1c4973 0.76%, #08223a 100.12%);

    max-width: $size__content-wide-max-width;
    margin: 0 calc(-1 * var(--container-padding)) rem(24);
    padding: calc(var(--page-header-padding-top) + var(--site-header-height)) var(--container-padding) rem(32); // Top padding includes 56px for the site header
    background-color: $color-bg-light-100;

    @include breakpoint('small') {
      margin: 0 auto rem(40);
    }

    @include breakpoint('medium') {
      --page-header-padding-top: #{rem(40)};
    }

    @include breakpoint('large') {
      --page-header-padding-top: #{rem(64)};
    }

    &::before {
      height: 40%;
      background: $gradient;

      @include breakpoint('small') {
        @include csis-block-full-width-wrapper();
      }
    }

    .author &,
    .entry-header__title--about {
      --page-header-title-margin-bottom: #{0};
    }

    .blog & {
      --page-header-title-margin-bottom: #{4};
    }
  }

  &__content {
    width: 100%;

    @include breakpoint('medium') {
      max-width: $size__content-max-width;
      margin-right: auto;
      margin-left: auto;
    }

    @include breakpoint('large') {
      min-width: $size__content-max-width;
      max-width: $size__header-max-width;
    }
  }

  &__top {
    margin-bottom: rem(16);
    padding-bottom: rem(24);
    border-bottom: 1px solid #c6c6c6;

    @include breakpoint('medium') {
      margin-bottom: rem(12);
    }

    @include breakpoint('large') {
      margin-bottom: rem(8);
    }
  }

  &__bottom {
    @include breakpoint('large') {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }
  }

  .featured-media {
    margin: rem(24) auto 0;

    @include breakpoint('small') {
      margin-top: rem(32);
    }

    @include breakpoint('large') {
      max-width: $size__content-max-width;
      margin: rem(48) auto 0;

      img {
        margin-right: auto;
        margin-left: auto;
      }
    }

    &__image-wrapper {
      position: relative;
      width: fit-content;
      height: fit-content;
      margin-right: auto;
      margin-left: auto;

      &::after {
        position: absolute;
        bottom: rem(-8);
        content: '';
        display: inline-block;
        width: rem(72);
        height: rem(8);
        background-color: $color-accent-secondary-yellow-100;
      }
    }
  }

  &__job-title {
    margin-top: rem(8);
  }

  &__title {
    @extend %text-style-heading-3-x-large-strong;
    margin-bottom: var(--page-header-title-margin-bottom);
    color: var(--page-header-title-color);

    &--yellow {
      color: $color-accent-secondary-yellow-100;
    }

    &-secondary {
      color: $color-white-100;
    }

    &-label {
      @extend %text-style-heading-large-strong;
      display: block;
      margin-bottom: rem(4);
      color: $color-accent-secondary-yellow-100;
    }
  }

  &__desc {
    grid-column: 1;

    .entry-header--blue & {
      @extend %text-style-paragraph-x-large;
      width: 100%;
      max-width: $size__content-max-width;
      color: $color-white-190;

      @include breakpoint('large') {
        width: unset;
      }
    }

    .entry-header--light & {
      max-width: $size__content-max-width;
      @extend %text-style-paragraph-large;
      color: $color-black-180;
    }
  }

  &__grid {
    @include breakpoint('large') {
      display: grid;
      grid-template-columns: minmax(auto, 680px) rem(300);
      justify-content: stretch;

      .entry-header__desc {
        @include breakpoint('large') {
          margin-right: rem(40);
        }
      }
    }
  }

  &__cta {
    grid-column: 1;
    justify-self: flex-start;
    max-width: fit-content;
    margin-top: rem(24);
    color: $color-white-180;
    text-transform: unset;

    &:hover {
      color: $color-white-100;
    }

    &:focus {
      color: $color-white-100;
      background-color: $color-accent-primary-blue-100;
    }

    .icon {
      &-chevron-right {
        margin-left: rem(8);
      }

      &-chevron-left {
        width: rem(7.88);
        height: rem(13.51);
        margin-right: rem(8);
      }
    }
  }

  &__news-btn {
    width: fit-content;
    margin-top: rem(24);
  }

  .desktop-only {
    display: none;

    @include breakpoint('large') {
      display: block;
      padding-left: rem(56);
      border-left: rgba(45, 156, 219, 0.15) solid 1px;
    }
  }

  &__write-for-us {
    grid-column: 2;
    grid-row: 1 / span 2;

    .write-for-us {
      &__title,
      .icon {
        color: $color-accent-secondary-yellow-100;
      }

      &__desc {
        color: $color-white-100;
      }

      &__link {
        color: $color-white-100;
        font-weight: 700;
      }
    }
  }

  &__application-block {
    @include breakpoint('medium') {
      display: grid;
      grid-template-areas:
        'accepting accepting'
        'class apply'
        'deadline apply';
      grid-template-columns: minmax(min-content, max-content) auto;
      column-gap: rem(24);
    }
  }

  &__accepting-applications {
    @extend %text-style-heading-medium;
    grid-area: accepting;
    margin-bottom: rem(12);
    color: $color-accent-primary-blue-100;
  }

  &__apply {
    grid-area: apply;

    &:nth-child(2) {
      grid-area: class;
    }
  }

  &__event-past {
    @extend %text-style-label-large-italics;
    position: relative;
    color: $color-accent-primary-blue-200;

    .icon {
      position: relative;
      top: rem(2);
      margin-right: rem(4);
    }
  }

  .post-meta__wrapper {
    @include breakpoint('small') {
      display: flex;

      .post-meta__authors {
        margin-left: rem(16);

        &::before {
          content: '|';
          padding-right: rem(16);
        }
      }
    }
  }

  .post-meta__class {
    grid-area: class;
  }

  .post-meta__program-date {
    grid-area: deadline;
    align-items: baseline;
    margin-top: rem(8);
    margin-bottom: rem(16);

    &:nth-child(2) {
      grid-area: class;
    }

    @include breakpoint('medium') {
      margin-bottom: 0;
    }
  }

  .post-meta__terms-type {
    margin-bottom: rem(4);

    &::before {
      content: '';
      display: inline-block;
      width: rem(40);
      height: rem(10);
      margin-right: rem(16);
      background-color: $color-accent-secondary-yellow-100;
    }
  }

  .post-meta__series {
    margin-bottom: rem(16);
  }

  .post-meta__event {
    display: flex;
    flex-direction: column;

    @include breakpoint('small') {
      flex-direction: row;
      align-items: baseline;

      &-datetime {
        margin-left: rem(24);
      }
    }

    &:not(:first-child) {
      margin-top: rem(12);

      @include breakpoint('small') {
        margin-top: rem(8);
      }
    }

    &:first-of-type .post-meta__label {
      margin-right: 0;
    }

    &:last-of-type {
      margin-bottom: rem(16);
    }
  }

  /* stylelint-disable */
  .addtoany_list {
    /* stylelint-enable */
    justify-content: flex-start;
    margin-top: rem(16);

    @include breakpoint('medium') {
      margin-top: rem(12);
    }

    @include breakpoint('large') {
      position: relative;
      top: -8px;
      justify-content: flex-end;
      margin-top: rem(0);

      &:first-child {
        justify-content: flex-start;
      }
    }
  }
}
