@use '../abstracts' as *;
@use 'sass:map';
@use '../components/pagination';

@each $page, $values in $archive-widths {
  .#{$page} {
    --content-width: #{map.get($values, 'content')};
    --postlist-width: #{map.get($values, 'postlist')};
    --sidebar-width: #{map.get($values, 'sidebar')};
  }
}

.archive {
  background: $color-bg-light-200;

  &__content {
    max-width: var(--content-width, #{$size__archive-max-width});
    margin-right: auto;
    margin-left: auto;

    > *:not(.cards__container):last-child {
      margin-bottom: rem(40);

      @include breakpoint('large') {
        margin-bottom: rem(56);
      }
    }
  }

  &__postlist {
    max-width: var(--postlist-width, 100%);
    margin-right: auto;
    margin-left: auto;
  }

  /*----------  Filters  ----------*/
  &--has-filters {
    .archive__content {
      display: grid;

      @include breakpoint('large') {
        grid-template-columns: auto minmax(auto, var(--sidebar-width));
        column-gap: rem(40);
      }
    }

    .archive__sidebar {
      margin-bottom: rem(40);

      @include breakpoint('large') {
        grid-column: 2;
        grid-row: 1 / span 3;
      }
    }
  }

  &__filters {
    display: grid;
    gap: rem(16);

    @include breakpoint('small') {
      grid-template-columns: repeat(2, 1fr);
    }

    @include breakpoint('large') {
      grid-template-columns: 1fr;
    }
  }

  &__section-title {
    margin-bottom: rem(16);
    padding-bottom: rem(8);
    color: $color-black-165;
    @extend %text-style-heading-x-large;
    border-bottom: 1px solid $color-border-dark-130;
  }

  &__featured {
    .post-block {
      padding-top: rem(34);

      @include breakpoint('small') {
        padding: rem(40) rem(40) rem(40) rem(50);
      }

      &::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: rem(10);
        background-color: $color-accent-secondary-yellow-100;

        @include breakpoint('small') {
          width: rem(10);
          height: 100%;
        }
      }
    }
  }

  &__disclaimer {
    color: $color-black-180;
    @extend %text-style-paragraph-large;
  }
}

.cards__container {
  margin-top: rem(40);
  @include csis-block-full-width-wrapper;

  @include breakpoint('large') {
    display: flex;
    margin-top: rem(56);
  }
}

.card {
  flex: 0 0 50%;
  padding: rem(24) 6vw;
  background-repeat: no-repeat;
  background-size: cover;

  &__link {
    display: block;
    max-width: rem(400);
    margin: auto;
    padding: rem(24);
    // background-color: $color-bg-dark-290;
    @include shadow(md);

    &:hover .card__title {
      // color: $color-link-primary-200;
    }

    &:focus .card__title {
      background: $color-bg-light-400;
    }
  }

  &__title {
    @extend %text-style-heading-large-strong;
    margin-bottom: rem(12);
    color: $color-white-100;
    transition: color 0.3s ease-in-out;
  }

  .icon {
    margin-right: rem(12);
  }

  &__description {
    @extend %text-style-label-large;
    display: flex;
    color: $color-white-190;
  }
}

/*----------  Events  ----------*/
.events__upcoming {
  padding-top: rem(16);

  @include breakpoint('medium') {
    padding-top: rem(24);
  }

  > :last-child {
    margin-bottom: rem(40);

    @include breakpoint('large') {
      margin-bottom: rem(48);
    }
  }
}
